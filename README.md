# HeadNeckControl

<div align="center">

**åŸºäºRBFçš„ä»¿ç”Ÿé¢ˆéƒ¨èˆµæœºæ§åˆ¶ç³»ç»Ÿ**

é€šè¿‡ 8 ä¸ªèˆµæœºå®ç°ä»¿ç”Ÿå¤´éƒ¨çš„å®æ—¶æ§åˆ¶å’ŒåŠ¨ç”»æ’­æ”¾

</div>

---

## æ•ˆæœå±•ç¤º

### ä»¿ç”Ÿè„–å­è¿è¡Œæ¼”ç¤º

<div align="center">

 <!-- æ›¿æ¢ä¸ºä½ çš„å®é™… GIF æ–‡ä»¶ -->
<img src="images/media/test.gif" width="600" alt="ä»¿ç”Ÿè„–å­è¿è¡Œæ¼”ç¤º" />

*ä»¿ç”Ÿè„–å­å®æ—¶è¿½è¸ªæ¼”ç¤º*

</div>

---

## é¡¹ç›®ç®€ä»‹

HeadNeckControl æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä»¿ç”Ÿé¢ˆéƒ¨æ§åˆ¶ç³»ç»Ÿï¼Œé€šè¿‡æ ‘è“æ´¾å’Œ PCA9685 é©±åŠ¨ 8 ä¸ªèˆµæœºæ¥æ§åˆ¶ä»¿ç”Ÿå¤´éƒ¨çš„è¿åŠ¨ã€‚ç³»ç»Ÿæ”¯æŒå¤šç§æ§åˆ¶æ–¹å¼ï¼šæ‰‹æœº ARKit é¢éƒ¨è¿½è¸ªã€åŠ¨ç”»æ–‡ä»¶æ’­æ”¾ã€Windows ç«¯æ‰‹åŠ¨æ§åˆ¶å’Œæµ‹è¯•æ¨¡å¼ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶å¤´éƒ¨çš„ä¿¯ä»°ã€åèˆªå’Œæ»šåŠ¨ä¸‰ä¸ªè‡ªç”±åº¦ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- **ARKit å®æ—¶è¿½è¸ª**ï¼šé€šè¿‡ iOS è®¾å¤‡ä½¿ç”¨ ARKit æ•æ‰é¢éƒ¨å§¿æ€ï¼Œé€šè¿‡ UDP ç›´æ¥å‘é€åˆ°æ ‘è“æ´¾è¿›è¡Œå®æ—¶æ§åˆ¶
- **Unity iOS åº”ç”¨**ï¼šæä¾›å®Œæ•´çš„ Unity é¡¹ç›®ï¼Œç”¨äºç”Ÿæˆ ARKit é¢éƒ¨è¿½è¸ª iOS åº”ç”¨ï¼Œæ”¯æŒè‡ªå®šä¹‰å’Œæ‰©å±•
- **åŠ¨ç”»æ’­æ”¾**ï¼šæ”¯æŒæ’­æ”¾é¢„è®¾çš„å¤´éƒ¨åŠ¨ä½œåºåˆ—ï¼ŒåŠ¨ç”»æ–‡ä»¶å­˜å‚¨åœ¨æ ‘è“æ´¾æœ¬åœ°
- **Windows æ‰‹åŠ¨æ§åˆ¶**ï¼šæä¾›å›¾å½¢ç•Œé¢ï¼Œå¯é€šè¿‡æ»‘å—ç›´æ¥æ§åˆ¶èˆµæœºè§’åº¦
- **æµ‹è¯•æ¨¡å¼**ï¼šç”¨äºè°ƒè¯•å’Œæ ¡å‡†èˆµæœºçš„æµ‹è¯•æ¨¡å¼
- **å¹³æ»‘è¿‡æ¸¡**ï¼šä½¿ç”¨ RBFï¼ˆå¾„å‘åŸºå‡½æ•°ï¼‰æ’å€¼ç®—æ³•ï¼Œå®ç°æµç•…çš„åŠ¨ä½œè¿‡æ¸¡
- **å¤šè¾“å…¥æº**ï¼šæ”¯æŒå¤šç§è¾“å…¥æºçš„çµæ´»åˆ‡æ¢

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     UDP      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Windows App    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  Raspberry Pi    â”‚
â”‚  (C# .NET 8)    â”‚              â”‚   (Python 3.11)  â”‚
â”‚                 â”‚              â”‚                  â”‚
â”‚  - TrackBar     â”‚              â”‚  - BaseInput     â”‚
â”‚  - æ‰‹åŠ¨æ§åˆ¶      â”‚              â”‚  - HeadMapper    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ - ServoControllerâ”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                            UDP           â”‚ I2C
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   iOS Device    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   (ARKit)       â”‚                       â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚   PCA9685    â”‚
                                 â”‚ (PWM Driver) â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                       èˆµæœº
                                        â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚  ä»¿ç”Ÿå¤´éƒ¨     â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ•°æ®æµå‘è¯´æ˜**ï¼š
- **Windows ç«¯**ï¼šé€šè¿‡æ»‘å—æ‰‹åŠ¨æ§åˆ¶èˆµæœºè§’åº¦ï¼Œé€šè¿‡ UDP å‘é€èˆµæœºè§’åº¦æ•°æ®åˆ°æ ‘è“æ´¾
- **iOS ARKit ç«¯**ï¼šç›´æ¥é€šè¿‡ UDP å‘é€ ARKit æ•æ‰çš„é¢éƒ¨å§¿æ€æ•°æ®åˆ°æ ‘è“æ´¾
- **åŠ¨ç”»æ’­æ”¾**ï¼šåŠ¨ç”»æ–‡ä»¶ï¼ˆ`.anim`ï¼‰å­˜å‚¨åœ¨æ ‘è“æ´¾æœ¬åœ°ï¼Œç”±æ ‘è“æ´¾è¯»å–å¹¶æ’­æ”¾
- **æ ‘è“æ´¾**ï¼šä½œä¸ºæ§åˆ¶ä¸­å¿ƒï¼Œæ¥æ”¶æ‰€æœ‰è¾“å…¥æºæ•°æ®ï¼Œç»è¿‡ HeadMapper æ˜ å°„åæ§åˆ¶èˆµæœº

## ç¡¬ä»¶æ¸…å•
- **æ ‘è“æ´¾**ï¼š3B+ æˆ–æ›´é«˜ç‰ˆæœ¬
- **windowsç”µè„‘**ï¼šéšæ„ï¼Œä¸æ ‘è“æ´¾éœ€è¿ç»Ÿä¸€å±€åŸŸç½‘
- **PCA9685 PWM é©±åŠ¨æ¿**ï¼šä¸€å—
- **èˆµæœº**ï¼šMG996R æˆ–ç±»ä¼¼çš„é‡‘å±é½¿è½®èˆµæœº ï¼ˆ8ä¸ªï¼‰ï¼Œæ¯ä¸ªéœ€è¦åå­—èˆµè‡‚
- **ç”µæº**ï¼š12V33Aç”µæº + 2-4ä¸ª6V5Aé™å‹æ¨¡å—ï¼ˆå¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
- **æœé‚¦çº¿ã€å¯¼çº¿**ï¼šè‹¥å¹²ï¼Œè¿æ¥ç”µæºã€æ ‘è“æ´¾ã€PCA9685 å’Œèˆµæœº
- **dyneemaç»³**ï¼šç›´å¾„1.5mm 3-5ç±³ï¼Œä½¿ç”¨å‰éœ€è¦åšé¢„æ‹‰ä¼¸ï¼ˆæ‰¾ä¸ªé‡ç‰©åŠä¸ªä¸€ä¸¤å¤©ï¼‰
- **ç‰¹æ°Ÿé¾™ç¡¬ç®¡**ï¼šå†…å¾„2mm * å¤–å¾„3mm 3-5ç±³
- **é™¶ç“·çœ¼**ï¼šå°å¤–å¾„3.9 * å­”2.3 * æ€»é«˜6 ï¼ˆ25ä¸ªï¼‰
- **å°è½´æ‰¿**ï¼š9 * 14 * 2.5 ï¼ˆ8ä¸ªï¼‰
- **TPUèƒ¶åœˆ**ï¼šç›´å¾„8mm * å®½2mm ï¼ˆ8ä¸ªï¼‰ï¼Œå¯ä»¥ç”¨å·®ä¸å¤šçš„æ©¡çš®ç­‹
- **èƒ¶æ°´**ï¼š502æˆ–å…¶ä»–å¿«å¹²èƒ¶
- **èºä¸**ï¼šå¹³å¤´è‡ªæ”»M3 * 8 ï¼ˆ50ä¸ªï¼‰ï¼Œå¹³å¤´M3 * 5 (8ä¸ª),å¹³å¤´è‡ªæ”»M2 * 10 ï¼ˆ32ä¸ªï¼‰ï¼Œå¹³å¤´è‡ªæ”»M2 * 8 ï¼ˆ12ä¸ªï¼‰ï¼ŒM2 * 10 + èºæ¯ ï¼ˆ8ç»„ï¼‰ï¼ˆèºä¸å»ºè®®å¤šå¤‡äº›ï¼Œå¾ˆå®¹æ˜“ä¸¢ğŸ˜“ï¼‰

- **é¢åŒ…æ¿ï¼ˆå¯é€‰ï¼‰**ï¼šç”¨äºç”µè·¯è¿æ¥
- **é”è¾¹æ¶²ï¼ˆå¯é€‰ï¼‰**ï¼šç”¨äºæŠŠæ¯›èºçš„çº¿å¤´å¼„é¡ºï¼Œå¯ä»¥æ›´å¥½çš„ç©¿å­”ï¼Œä¹Ÿå¯ä»¥ç”¨æ™®é€šçš„åŠå…¬èƒ¶æ°´ä»£æ›¿
- **æ¶¦æ»‘è„‚ï¼ˆå¯é€‰ï¼‰**ï¼šå…³èŠ‚äº¤æ¥å¤„çš„æ¶¦æ»‘ï¼Œæœ€å¥½æœ‰

### å¸Œæœ›ä½ å¯ä»¥æœ‰çš„ä¸€äº›å·¥å…·
- **èºä¸åˆ€ã€é’³å­**ï¼šå¦‚æœæ²¡æœ‰çš„è¯å°±æ”¾å¼ƒè¿™ä¸ªé¡¹ç›®å§~
- **FDM 3Dæ‰“å°æœº**ï¼šæœ€å¤§æ‰“å°å°ºå¯¸æœ€å¥½è¶…è¿‡200 * 200 * 200ï¼Œæ²¡æœ‰çš„è¯æ‰¾ä¸ªä»£æ‰“å§~
- **ç”µç£¨**ï¼šç”¨äºæ¸…ç†æ‰“ç£¨æ¨¡å‹ç²—ç³™çš„ç»†èŠ‚ï¼Œå®åœ¨æ²¡æœ‰ç”¨ç ‚çº¸ä¹Ÿä¸æ˜¯ä¸è¡Œ

### æœ€åå¸Œæœ›ä½ å¯ä»¥æœ‰
- **å¾ˆå¼ºçš„åŠ¨æ‰‹èƒ½åŠ›**ï¼šè¿™ä¸ªé¡¹ç›®æ‰€æœ‰ä¸œè¥¿éƒ½éœ€è¦ä½ è‡ªå·±äº²è‡ªç»„è£…ğŸ˜…
- **å¾ˆå¼ºçš„è€å¿ƒ**ï¼šè¿™å¥—è„–å­æ¯”ä¾‹å¤§å°æ˜¯æŒ‰ç…§çœŸå®6-7å²å­©å­å°ºå¯¸è®¾è®¡çš„ï¼Œå¾ˆå¤šéƒ¨ä»¶éå¸¸å°ä¸”éš¾å®‰è£…ï¼Œæ‰€ä»¥å¦‚æœä½ å·²ç»å¼€å§‹äº†ï¼Œé‚£ä¹ˆä¸€å®šè¦è€å¿ƒä¸€ç‚¹â¤

## å¿«é€Ÿå¼€å§‹

### æ ‘è“æ´¾ç¯å¢ƒé…ç½®

#### 1. ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**ï¼šRaspberry Pi OS
- **Python ç‰ˆæœ¬**ï¼šPython 3.10 æˆ–æ›´é«˜ï¼ˆæœ¬ç³»ç»Ÿä½¿ç”¨ Python 3.11ï¼‰
- **å†…å­˜**ï¼šè‡³å°‘ 2GB RAMï¼ˆæ¨è 4GBï¼‰

#### 2. å…‹éš†é¡¹ç›®ï¼ˆå¯ä»¥åœ¨pcä¸Šå…‹éš†å¥½ï¼ŒæŠŠRaspberryPiæ–‡ä»¶å¤¹æ‹·è´åˆ°æ ‘è“æ´¾ä¸Šï¼‰

```bash
cd ~
git clone https://github.com/yourusername/HeadNeckControl.git
cd HeadNeckControl/RaspberryPi
```

#### 3. å®‰è£… Python ä¾èµ–

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update
sudo apt upgrade -y

# å®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt install -y python3-pip python3-dev

# å®‰è£… Python åŒ…
pip3 install -r requirements.txt
```


#### 4. å¯ç”¨ I2C æ¥å£

```bash
# æ–¹æ³• 1ï¼šä½¿ç”¨ raspi-config
sudo raspi-config
# é€‰æ‹© Interface Options -> I2C -> Enable

# æ–¹æ³• 2ï¼šå‘½ä»¤è¡Œ
sudo apt install -y i2c-tools
sudo raspi-config nonint do_i2c 0

# é‡å¯æ ‘è“æ´¾
sudo reboot
```

#### 5. éªŒè¯ I2C è¿æ¥

é‡å¯åï¼Œæ£€æŸ¥ PCA9685 æ˜¯å¦è¢«è¯†åˆ«ï¼š

```bash
# åˆ—å‡ºæ‰€æœ‰ I2C è®¾å¤‡
i2cdetect -y 1

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼ˆ0x40 æ˜¯ PCA9685 é»˜è®¤åœ°å€ï¼‰ï¼š
#      0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
# 00:          -- -- -- -- -- -- -- -- -- -- -- -- --
# 10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
# 20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
# 30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
# 40: 40 -- -- -- -- -- -- -- -- -- -- -- -- -- --
# ...
```

å¦‚æœçœ‹åˆ° `40`ï¼Œè¯´æ˜ PCA9685 å·²æ­£ç¡®è¿æ¥ã€‚




## é¡¹ç›®ç»“æ„

```
HeadNeckControl/
 â”œâ”€â”€ RaspberryPi/              # æ ‘è“æ´¾ç«¯ä»£ç ï¼ˆPythonï¼‰
 â”‚   â”œâ”€â”€ main.py             # ä¸»ç¨‹åºå…¥å£
 â”‚   â”œâ”€â”€ config.py           # é…ç½®æ–‡ä»¶
 â”‚   â”œâ”€â”€ controller/         # æ§åˆ¶å™¨æ¨¡å—
 â”‚   â”‚   â”œâ”€â”€ servo_controller.py   # èˆµæœºæ§åˆ¶å™¨
 â”‚   â”‚   â””â”€â”€ head_mapper.py       # å¤´éƒ¨å§¿æ€æ˜ å°„å™¨
 â”‚   â”œâ”€â”€ input/              # è¾“å…¥æºæ¨¡å—
 â”‚   â”‚   â”œâ”€â”€ base_input.py        # è¾“å…¥æºåŸºç±»
 â”‚   â”‚   â”œâ”€â”€ input_arkit.py       # ARKit è¾“å…¥æº
 â”‚   â”‚   â”œâ”€â”€ input_anim.py        # åŠ¨ç”»æ–‡ä»¶è¾“å…¥æº
 â”‚   â”‚   â”œâ”€â”€ input_ai.py          # AI è¾“å…¥æº
 â”‚   â”‚   â””â”€â”€ input_test.py       # æµ‹è¯•è¾“å…¥æº
 â”‚   â”œâ”€â”€ utils/              # å·¥å…·æ¨¡å—
 â”‚   â”‚   â””â”€â”€ filetools.py        # æ–‡ä»¶å¤„ç†å·¥å…·
 â”‚   â”œâ”€â”€ anim_data/          # åŠ¨ç”»æ–‡ä»¶ç›®å½•
 â”‚   â””â”€â”€ requirements.txt    # Python ä¾èµ–
 â”‚
 â”œâ”€â”€ Windows/                # Windows ç«¯ä»£ç ï¼ˆC#ï¼‰
 â”‚   â””â”€â”€ NeckControlOutput/
 â”‚       â”œâ”€â”€ Form1.cs            # ä¸»çª—ä½“
 â”‚       â”œâ”€â”€ Form1.Designer.cs   # çª—ä½“è®¾è®¡å™¨ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
 â”‚       â”œâ”€â”€ Models.cs           # æ•°æ®æ¨¡å‹
 â”‚       â”œâ”€â”€ RBFHelper.cs        # RBF æ’å€¼åŠ©æ‰‹
 â”‚       â”œâ”€â”€ WeightMatrixHelper.cs # æƒé‡çŸ©é˜µè®¡ç®—
 â”‚       â”œâ”€â”€ Program.cs          # ç¨‹åºå…¥å£
 â”‚       â””â”€â”€ NeckControlOutput.csproj # é¡¹ç›®æ–‡ä»¶
 â”‚
 â”œâ”€â”€ UnityArkit/              # Unity iOS ARKit åº”ç”¨
 â”‚   â”œâ”€â”€ Assets/             # Unity èµ„æºå’Œè„šæœ¬
 â”‚   â”‚   â”œâ”€â”€ Scenes/          # åœºæ™¯æ–‡ä»¶
 â”‚   â”‚   â”œâ”€â”€ Scripts/         # C# è„šæœ¬
 â”‚   â”‚   â””â”€â”€ Samples/         # AR Foundation ç¤ºä¾‹
 â”‚   â”œâ”€â”€ Packages/           # Unity åŒ…é…ç½®
 â”‚   â”œâ”€â”€ ProjectSettings/     # é¡¹ç›®è®¾ç½®
 â”‚   â””â”€â”€ UnityArkit.sln     # è§£å†³æ–¹æ¡ˆæ–‡ä»¶
 â”‚
 â”œâ”€â”€ 3D-Models/              # 3D æ‰“å°æ¨¡å‹æ–‡ä»¶
 â”‚   â”œâ”€â”€ OBJ/                 # Wavefront OBJ æ ¼å¼æ¨¡å‹
 â”‚   â”œâ”€â”€ 3MF/                 # Bambu Studio åˆ‡ç‰‡æ ¼å¼æ¨¡å‹
 â”‚   â””â”€â”€ README.md            # 3D æ‰“å°è¯´æ˜
 â”‚
 â”œâ”€â”€ AGENTS.md               # å¼€å‘è€…æŒ‡å—
 â”œâ”€â”€ CHECKLIST.md            # é¡¹ç›®æ£€æŸ¥æ¸…å•
 â”œâ”€â”€ CONTRIBUTING.md         # è´¡çŒ®æŒ‡å—
 â”œâ”€â”€ LICENSE                # MIT è®¸å¯è¯
 â”œâ”€â”€ PACKAGING.md            # æ‰“åŒ…å‘å¸ƒæŒ‡å—
 â”œâ”€â”€ README.md              # æœ¬æ–‡ä»¶
 â””â”€â”€ .gitignore            # Git å¿½ç•¥è§„åˆ™
 ```

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºæ”¹è¿›å»ºè®®ï¼è¯·é˜…è¯» [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è‡´è°¢

- Adafruit çš„ [CircuitPython](https://circuitpython.org/) åº“

## æ¬¢è¿å›´è§‚æˆ‘çš„Bç«™

- Bç«™ [æ˜Ÿç‘¶çˆ¸çˆ¸å‘€](https://space.bilibili.com/26313918)

---

<div align="center">

**Made with â¤ï¸ for robotics enthusiasts**

</div>
